# 项目代码功能综述

本报告基于当前仓库内容，汇总 `text2graph2text` 项目已实现的功能模块及其作用。

## 1. 总体流程

`main.py` 将多个子模块串联成“文本→图→文本”的实验管线，覆盖文本生成、实体关系抽取、图构建、图编码、对比学习与图转文本等步骤，实现一次完整循环【F:main.py†L15-L93】。

## 2. 核心模块说明

| 模块 | 作用 |
| --- | --- |
| `src/gpt_module.py` | 调用 GPT-2 生成文本，用于模拟用户输入扩展【F:src/gpt_module.py†L1-L10】 |
| `src/ner_extraction.py` | 提供基于 GPT 和 spaCy 的实体与关系抽取，输出节点和边的 JSON 结构【F:src/ner_extraction.py†L1-L73】 |
| `src/graph_builder.py` | 依据抽取结果构建 NetworkX 有向图，加入节点与带标签的边【F:src/graph_builder.py†L1-L7】 |
| `src/graph_visualizer.py` | 使用 PyVis 将图谱渲染为交互式 HTML，可视化节点与关系【F:src/graph_visualizer.py†L1-L17】 |
| `src/graph_transformer.py` | 基于 GATConv 实现图编码器 `GraphEncoder`，输出节点语义嵌入【F:src/graph_transformer.py†L1-L31】 |
| `src/graph_embedding_visualizer.py` | 通过 t-SNE 对节点嵌入降维并绘制散点图，辅助理解表示分布【F:src/graph_embedding_visualizer.py†L1-L29】 |
| `src/graph_to_text.py` | 依据图结构生成探索提示文本，描述目标节点及其邻居关系【F:src/graph_to_text.py†L1-L20】 |
| `src/contrastive_loss.py` | 定义对比学习中的 NT-Xent 损失函数，用于对齐正负样本【F:src/contrastive_loss.py†L1-L31】 |
| `src/train_contrastive.py` | 训练流程示例：计算嵌入、构造正样本对并迭代优化【F:src/train_contrastive.py†L1-L22】 |

## 3. 当前不足与待办

- `config/config.yaml` 尚未配置参数；
- `src/loop_controller.py` 与 `scripts/` 目录下脚本为空壳；
- 缺少自动化测试与 CI 配置。

## 4. 后续建议

1. 补全配置文件与脚本，实现可复现的训练与推理流程；
2. 完善循环控制与数据管理模块；
3. 引入单元测试或集成测试，保障模块稳定性；
4. 考虑对接 Hugging Face 等平台，发布微调模型与可复现实验。

